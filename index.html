<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Partial.py</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta property="og:type" content="website">
<meta property="og:title" content="Partial.py">
<meta property="og:url" content="https://marpple.github.io/partial.py/index.html">
<meta property="og:site_name" content="Partial.py">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Partial.py">
  
  
    <link rel="shortcut icon" href="/partial.py/css/images/favicon.ico">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/partial.py/css/style.css">
  

</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="header-outer">
    <div id="header-title" class="inner">
      <a href="/partial.py/">
       
        <div id="logo">Partial.py</div>
       
      </a>
    </div>
    <div id="header-middle" class="inner"></div>
    <div id="header-menu" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/partial.py/">About</a>
        
          <a class="main-nav-link" href="/partial.py/docs">Docs</a>
        
          <a class="main-nav-link" href="https://github.com/marpple/partial.py">Github</a>
        
          <a class="main-nav-link" href="https://marpple.github.io/partial.js/">Partial.js</a>
        
      </nav>
    </div>
  </div>
</header>
      <div id="body">
        
<aside id="sidebar">
  <div class="widget-wrap" id="about">
    
    <div class="widget-title">
      <a href="#설치하기">설치하기</a>
    </div>
    <div class="widget">
      <ul>
        
        <li>
          <a href="#Partial-py-설치">Partial.py 설치</a>
        </li>
        
        <li>
          <a href="#Partial-py-사용">Partial.py 사용</a>
        </li>
        
      </ul>
    </div>
    
    <div class="widget-title">
      <a href="#더-나은-부분-적용-Partial-application">더 나은 부분 적용 (Partial application)</a>
    </div>
    <div class="widget">
      <ul>
        
        <li>
          <a href="#partial의-일반적-사용">_.partial의 일반적 사용</a>
        </li>
        
        <li>
          <a href="#오른쪽에서부터-인자-적용해두기">오른쪽에서부터 인자 적용해두기</a>
        </li>
        
        <li>
          <a href="#간결하게-사용하기">간결하게 사용하기</a>
        </li>
        
      </ul>
    </div>
    
    <div class="widget-title">
      <a href="#파이프라인">파이프라인</a>
    </div>
    <div class="widget">
      <ul>
        
        <li>
          <a href="#즉시-실행과-Multiple-Results">즉시 실행과 Multiple Results</a>
        </li>
        
        <li>
          <a href="#파이프라인-함수를-리턴하는-pipe">파이프라인 함수를 리턴하는 _.pipe</a>
        </li>
        
      </ul>
    </div>
    
    <div class="widget-title">
      <a href="#부분-커링">부분 커링</a>
    </div>
    <div class="widget">
      <ul>
        
        <li>
          <a href="#커링이-부분적으로-동작하는-함수">커링이 부분적으로 동작하는 함수</a>
        </li>
        
        <li>
          <a href="#파이프라인과-함께">파이프라인과 함께</a>
        </li>
        
      </ul>
    </div>
    
    <div class="widget-title">
      <a href="#비동기">비동기</a>
    </div>
    <div class="widget">
      <ul>
        
        <li>
          <a href="#파이프라인으로-비동기-제어-하기">파이프라인으로 비동기 제어 하기</a>
        </li>
        
        <li>
          <a href="#컬렉션을-다루는-비동기-제어-함수">컬렉션을 다루는 비동기 제어 함수</a>
        </li>
        
      </ul>
    </div>
    
  </div>
</aside>
<div id="main">
  <div id="posts-container">
    
  
    <div id="post-함수형 파이썬 라이브러리 Partial.py">
      <h2 class="post-title">함수형 파이썬 라이브러리 Partial.py</h2>
      <article id="about" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta"></div>
  <div class="article-inner">
    <div class="article-entry" itemprop="articleBody">
      <p>Partial.py는 함수형 파이썬을 더 많은 영역에서 사용하고자, 몇 가지 기능을 확장한 라이브러리입니다. Partial.py는 부분 적용, 파이프라인, 비동기 제어 등의 기능을 제공하고 있습니다.</p>
<h2 id="설치하기"><a href="#설치하기" class="headerlink" title="설치하기"></a>설치하기</h2><h3 id="Partial-py-설치"><a href="#Partial-py-설치" class="headerlink" title="Partial.py 설치"></a>Partial.py 설치</h3><h5 id="git으로-설치하기"><a href="#git으로-설치하기" class="headerlink" title="git으로 설치하기:"></a>git으로 설치하기:</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">$ git <span class="built_in">clone</span> https://github.com/marpple/partial.py.git</div><div class="line">$ <span class="built_in">cd</span> partial.py</div><div class="line">$ sudo python setup.py install</div></pre></td></tr></table></figure>
<p><strong>혹은</strong></p>
<h5 id="pypi로-설치하기"><a href="#pypi로-설치하기" class="headerlink" title="pypi로 설치하기:"></a>pypi로 설치하기:</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ pip install partial.py</div></pre></td></tr></table></figure>
<h3 id="Partial-py-사용"><a href="#Partial-py-사용" class="headerlink" title="Partial.py 사용"></a>Partial.py 사용</h3><p>네임스페이스로 사용할 <code>_</code>, <code>__</code>, <code>___</code>를 불러옵니다.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">from</span> partial <span class="keyword">import</span> _, __, ___</div></pre></td></tr></table></figure>
<h2 id="더-나은-부분-적용-Partial-application"><a href="#더-나은-부분-적용-Partial-application" class="headerlink" title="더 나은 부분 적용 (Partial application)"></a>더 나은 부분 적용 (Partial application)</h2><p>Partial.py는 이름처럼 부분 적용(Partial application)을 중요하게 생각합니다. 기존의 <code>_.partial</code> 함수는 왼쪽에서부터만 인자를 적용해둘 수 있습니다. Partial.py의 <code>_.partial</code> 함수는 맨 오른쪽 인자나 맨 오른쪽에서 두 번째에만 인자를 적용해두는 것도 가능하며, 새로운 구분자인 <code>___</code>를 활용하여 중간 지점에 인자가 가변적으로 적용되도록 비워둘 수 있습니다.</p>
<h3 id="partial의-일반적-사용"><a href="#partial의-일반적-사용" class="headerlink" title="_.partial의 일반적 사용"></a>_.partial의 일반적 사용</h3><p><code>_.partial</code>을 실행하면서 인자 자리에 <code>_</code>를 넘기면 부분 적용할 인자를 건너띌 수 있습니다. <code>_</code>를 이용하면 원하는 곳에만 인자를 부분 적용해둘 수 있습니다. <code>_</code>가 있는 자리는 이후 실행시 채워집니다.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div></pre></td><td class="code"><pre><div class="line">pc = _.partial(<span class="keyword">print</span>, <span class="number">1</span>)</div><div class="line">pc(<span class="number">2</span>)</div><div class="line"><span class="comment"># 결과: 1 2</span></div><div class="line"><span class="comment"># 2 가 오른쪽으로 들어갑니다.</span></div><div class="line">pc(<span class="number">2</span>, <span class="number">3</span>)</div><div class="line"><span class="comment"># 결과: 1 2 3</span></div><div class="line"><span class="comment"># 2, 3이 오른쪽으로 들어갑니다.</span></div><div class="line"></div><div class="line">pc = _.partial(<span class="keyword">print</span>, _, <span class="number">2</span>)</div><div class="line">pc(<span class="number">1</span>)</div><div class="line"><span class="comment"># 결과: 1 2</span></div><div class="line"><span class="comment"># 1이 왼쪽의 _ 자리에 들어갑니다.</span></div><div class="line">pc(<span class="number">1</span>, <span class="number">3</span>)</div><div class="line"><span class="comment"># 결과: 1 2 3</span></div><div class="line"><span class="comment"># 1이 왼쪽의 _ 자리에 들어가고 3이 오른쪽으로 들어갑니다.</span></div><div class="line"></div><div class="line">pc = _.partial(<span class="keyword">print</span>, _, _, <span class="number">3</span>)</div><div class="line">pc(<span class="number">1</span>)</div><div class="line"><span class="comment"># 결과: 1 undefined 3</span></div><div class="line"><span class="comment"># 1이 왼쪽의 _ 자리에 들어가고 두 번째 _는 들어오지 않아 undefined가 됩니다.</span></div><div class="line">pc(<span class="number">1</span>, <span class="number">2</span>)</div><div class="line"><span class="comment"># 결과: 1 2 3</span></div><div class="line"><span class="comment"># 1과 2가 순서대로 _, _를 채웁니다.</span></div><div class="line">pc(<span class="number">1</span>, <span class="number">2</span>, <span class="number">4</span>)</div><div class="line"><span class="comment"># 결과: 1 2 3 4</span></div><div class="line"><span class="comment"># 1과 2가 순서대로 _, _를 채우고 3의 오른쪽으로 4가 들어갑니다.</span></div><div class="line"></div><div class="line">pc = _.partial(<span class="keyword">print</span>, _, <span class="number">2</span>, _, <span class="number">4</span>)</div><div class="line">pc(<span class="number">1</span>, <span class="number">3</span>, <span class="number">5</span>)</div><div class="line"><span class="comment"># 결과: 1 2 3 4 5</span></div><div class="line"><span class="comment"># 1을 _ 자리에 채우고 2를 넘겨서 _에 3을 채우고 4의 오른쪽에 5가 들어갑니다.</span></div><div class="line"></div><div class="line">pc = _.partial(<span class="keyword">print</span>, _, <span class="number">2</span>, _, _, <span class="number">5</span>)</div><div class="line">pc(<span class="number">1</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">6</span>)</div><div class="line"><span class="comment"># 결과: 1 2 3 4 5 6</span></div><div class="line"><span class="comment"># 1을 _ 자리에 채우고 2를 넘겨서 _에 3을 채우고 다음 _에 4를 채우고 5의 오른쪽에 6이 들어갑니다.</span></div></pre></td></tr></table></figure>
<h3 id="오른쪽에서부터-인자-적용해두기"><a href="#오른쪽에서부터-인자-적용해두기" class="headerlink" title="오른쪽에서부터 인자 적용해두기"></a>오른쪽에서부터 인자 적용해두기</h3><p><code>_.partial</code>을 실행하면 <code>___</code>를 기준으로 왼편의 인자들을 왼쪽부터 적용하고 오른편의 인자들을 오른쪽부터 적용할 준비를 해둔 함수를 리턴합니다. 부분 적용된 함수를 나중에 실행하면 그때 받은 인자들로 왼쪽과 오른쪽을 먼저 채운 후, 남은 인자들로 가운데 <code>___</code> 자리를 채웁니다.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line">pc = _.partial(<span class="keyword">print</span>, ___, <span class="number">2</span>, <span class="number">3</span>)</div><div class="line">pc(<span class="number">1</span>)</div><div class="line"><span class="comment"># 결과: 1 2 3</span></div><div class="line"><span class="comment"># ___ 자리에 1이 들어가고 2, 3은 맨 오른쪽에 들어갑니다.</span></div><div class="line">pc(<span class="number">1</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>)</div><div class="line"><span class="comment"># 결과: 1 4 5 6 2 3</span></div><div class="line"><span class="comment"># ___ 자리에 1, 4, 5, 6이 들어가고 2, 3은 맨 오른쪽에 들어갑니다.</span></div><div class="line"></div><div class="line">pc = _.partial(<span class="keyword">print</span>, _, <span class="number">2</span>, ___, <span class="number">6</span>)</div><div class="line">pc(<span class="number">1</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>)</div><div class="line"><span class="comment"># 결과: 1 2 3 4 5 6</span></div><div class="line"><span class="comment"># _에 1이 들어가고 2를 넘어가고 ___ 자리에 3, 4, 5가 채워지고 6이 맨 오른쪽에 들어갑니다.</span></div><div class="line">pc(<span class="number">1</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>)</div><div class="line"><span class="comment"># 결과: 1 2 3 4 5 7 8 9 6</span></div><div class="line"><span class="comment"># _에 1이 들어가고 2를 넘어가고 ___ 자리에 3, 4, 5, 7, 8, 9가 채워지고 6이 맨 오른쪽에 들어갑니다.</span></div><div class="line"></div><div class="line">pc = _.partial(<span class="keyword">print</span>, _, <span class="number">2</span>, ___, <span class="number">5</span>, _, <span class="number">7</span>)</div><div class="line">pc(<span class="number">1</span>)</div><div class="line"><span class="comment"># 결과: 1 2 5 undefined 7</span></div><div class="line"><span class="comment"># _ 자리에 1이 들어가고 2와 5사이는 유동적이므로 모이고 5가 들어간 후 _가 undefined로 대체 되고 7이 들어갑니다.</span></div><div class="line">pc(<span class="number">1</span>, <span class="number">3</span>, <span class="number">4</span>)</div><div class="line"><span class="comment"># 결과: 1 2 3 5 4 7</span></div><div class="line"><span class="comment"># _ 자리에 1이 들어가고 2와 5사이에 3이 들어가고 _ 를 4로 채운 후 7이 들어갑니다.</span></div><div class="line"><span class="comment"># 왼쪽의 _ 들이 우선 순위가 제일 높고 ___ 보다 오른쪽의 _ 들이 우선순위가 높습니다.</span></div><div class="line">pc(<span class="number">1</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">6</span>, <span class="number">8</span>)</div><div class="line"><span class="comment"># 결과: 1 2 3 4 6 5 8 7</span></div><div class="line"><span class="comment"># _ 자리에 1이 들어가고 2와 5사이에 3, 4, 6이 들어가고 _ 를 8로 채운 후 7이 들어갑니다.</span></div></pre></td></tr></table></figure>
<h3 id="간결하게-사용하기"><a href="#간결하게-사용하기" class="headerlink" title="간결하게 사용하기"></a>간결하게 사용하기</h3><p><code>_ == _.partial</code>입니다. <code>_.partial</code>을 <code>_</code>로 간결하게 표현할 수 있습니다.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">add</span> <span class="params">(a, b)</span>:</span> </div><div class="line">  <span class="keyword">return</span> a + b</div><div class="line">  </div><div class="line">add10 = _(add, <span class="number">10</span>)</div><div class="line">print( add10(<span class="number">5</span>) )</div><div class="line"><span class="comment"># 15</span></div></pre></td></tr></table></figure>
<h2 id="파이프라인"><a href="#파이프라인" class="headerlink" title="파이프라인"></a>파이프라인</h2><p>파이프라인 함수인 <code>_.pipe</code>, <code>_.go</code> 등은 작은 함수들을 모아 큰 함수를 만드는 함수입니다. 파이프라인으로 함수를 조합하면 왼쪽에서부터 오른쪽, 위에서부터 아래로 표현되어 읽기 쉬운 코드가 됩니다. 체인 방식과 다르게 아무 함수나 사용할 수 있어 자유도가 높습니다. 작은 함수들을 인자와 결과만을 생각하면서 조합하면 됩니다.</p>
<h3 id="즉시-실행과-Multiple-Results"><a href="#즉시-실행과-Multiple-Results" class="headerlink" title="즉시 실행과 Multiple Results"></a>즉시 실행과 Multiple Results</h3><p><code>_.go</code>는 파이프라인의 즉시 실행 버전입니다. 첫 번째 인자로 받은 값을 두 번째 인자로 받은 함수에게 넘겨주고 두 번째 인자로 받은 함수의 결과는 세 번째 함수에게 넘겨주는 것을 반복하다가 마지막 함수의 결과를 리턴해줍니다.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">_.go(<span class="number">10</span>, <span class="comment"># 첫 번째 함수에서 사용할 인자</span></div><div class="line">  <span class="keyword">lambda</span> a: a * <span class="number">10</span>, <span class="comment"># 연속 실행할 함수 1</span></div><div class="line">  <span class="comment"># 100</span></div><div class="line">  <span class="keyword">lambda</span> a: a - <span class="number">50</span>, <span class="comment"># 연속 실행할 함수 2</span></div><div class="line">  <span class="comment"># 50</span></div><div class="line">  <span class="keyword">lambda</span> a: a + <span class="number">10</span>) <span class="comment"># 연속 실행할 함수 3</span></div><div class="line">  <span class="comment"># 60</span></div></pre></td></tr></table></figure>
<p><code>_.go</code>는 Multiple Results를 지원합니다. <code>_.mr</code> 함수를 함께 사용하면 다음 함수에게 2개 이상의 인자들을 전달할 수 있습니다.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">_.go(<span class="number">10</span>, <span class="comment"># 첫 번째 함수에서 사용할 인자</span></div><div class="line">  <span class="keyword">lambda</span> a: _.mr(a * <span class="number">10</span>, <span class="number">50</span>), <span class="comment"># 두 개의 값을 리턴</span></div><div class="line">  <span class="keyword">lambda</span> a, b: a - b, <span class="comment"># 두 개의 인자 받기</span></div><div class="line">  <span class="keyword">lambda</span> a: a + <span class="number">10</span>)</div><div class="line">  <span class="comment"># 60</span></div></pre></td></tr></table></figure>
<p><code>_.go</code>의 첫 번째 인자는 두 번째 인자인 함수가 사용할 인자고 두 번째 부터는 파이프라인에서 사용할 함수들입니다. <code>_.go</code>의 두 번째 인자인 함수, 즉 최초 실행될 함수에게 2개 이상의 인자를 넘기고자 한다면 <code>_.mr</code>을 사용하면 됩니다. <code>_.mr</code>로 인자들을 감싸서 넘겨주면, 다음 함수는 인자를 여러 개로 펼쳐서 받게 됩니다.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">_.go(_.mr(<span class="number">2</span>, <span class="number">3</span>),</div><div class="line">  <span class="keyword">lambda</span> a, b: a + b, <span class="comment"># 2 + 3</span></div><div class="line">  <span class="keyword">lambda</span> a: a * a)</div><div class="line">  <span class="comment"># 25</span></div></pre></td></tr></table></figure>
<p><code>_.go</code>를 이미 정의되어 있는 함수와 조합하면 더욱 읽기 좋아집니다.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">add</span><span class="params">(a, b)</span>:</span></div><div class="line">  <span class="keyword">return</span> a + b</div><div class="line">  </div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">square</span><span class="params">(a)</span>:</span></div><div class="line">  <span class="keyword">return</span> a * a</div><div class="line">  </div><div class="line">_.go(_.mr(<span class="number">2</span>, <span class="number">3</span>), add, square)</div><div class="line"><span class="comment"># 25</span></div></pre></td></tr></table></figure>
<h3 id="파이프라인-함수를-리턴하는-pipe"><a href="#파이프라인-함수를-리턴하는-pipe" class="headerlink" title="파이프라인 함수를 리턴하는 _.pipe"></a>파이프라인 함수를 리턴하는 _.pipe</h3><p><code>_.go</code>가 즉시 실행하는 파이프라인이라면 <code>_.pipe</code>는 실행할 준비가 된 함수를 리턴하는 파이프라인 함수입니다. 그외 모든 기능은 <code>_.go</code>와 동일합니다.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">f1 = _.pipe(add, square)</div><div class="line">f1(<span class="number">2</span>, <span class="number">3</span>)</div><div class="line"><span class="comment"># 25</span></div></pre></td></tr></table></figure>
<h2 id="부분-커링"><a href="#부분-커링" class="headerlink" title="부분 커링"></a>부분 커링</h2><h3 id="커링이-부분적으로-동작하는-함수"><a href="#커링이-부분적으로-동작하는-함수" class="headerlink" title="커링이 부분적으로 동작하는 함수"></a>커링이 부분적으로 동작하는 함수</h3><p>Partial.py의 주요 함수들은 커링이 부분적으로 동작하도록 지원하고 있습니다. 아래는 일반적인 사용 모습입니다.</p>
<h5 id="일반적인-방식"><a href="#일반적인-방식" class="headerlink" title="일반적인 방식:"></a>일반적인 방식:</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">values = <span class="keyword">lambda</span> data: _.map(data, <span class="keyword">lambda</span> v, *r: v)</div><div class="line">print(values(&#123; <span class="string">'a'</span>: <span class="number">1</span>, <span class="string">'b'</span>: <span class="number">2</span>, <span class="string">'c'</span>: <span class="number">4</span> &#125;))</div><div class="line"><span class="comment"># [1, 2, 4]</span></div><div class="line"></div><div class="line">take3 = <span class="keyword">lambda</span> data: _.take(data, <span class="number">3</span>)</div><div class="line">take3([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>])</div><div class="line"><span class="comment"># [1, 2, 3]</span></div></pre></td></tr></table></figure>
<p>Partial.py의 주요 함수들은 부분 커링이 적용되어 위와 동일한 동작을 아래와 같이 간결하게 표현할 수 있습니다.</p>
<h5 id="부분-커링이-지원될-경우"><a href="#부분-커링이-지원될-경우" class="headerlink" title="부분 커링이 지원될 경우:"></a>부분 커링이 지원될 경우:</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">values = _.map(<span class="keyword">lambda</span> v, *r: v)</div><div class="line">print(values(&#123; <span class="string">'a'</span>: <span class="number">1</span>, <span class="string">'b'</span>: <span class="number">2</span>, <span class="string">'c'</span>: <span class="number">4</span> &#125;))</div><div class="line"><span class="comment"># [1, 2, 4]</span></div><div class="line"></div><div class="line">take3 = _.take(<span class="number">3</span>)</div><div class="line">take3([<span class="number">1</span>, <span class="number">3</span>, <span class="number">5</span>, <span class="number">7</span>, <span class="number">9</span>])</div><div class="line"><span class="comment"># [1, 3, 5]</span></div></pre></td></tr></table></figure>
<h3 id="파이프라인과-함께"><a href="#파이프라인과-함께" class="headerlink" title="파이프라인과 함께"></a>파이프라인과 함께</h3><p>부분 커링이 지원되면 파이프라인과 함께 사용할 때, 체인처럼 간결한 표현이 가능합니다.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div></pre></td><td class="code"><pre><div class="line">users = [</div><div class="line">  &#123; <span class="string">'id'</span>: <span class="number">1</span>, <span class="string">'name'</span>: <span class="string">'ID'</span>, <span class="string">'age'</span>: <span class="number">32</span> &#125;,</div><div class="line">  &#123; <span class="string">'id'</span>: <span class="number">2</span>, <span class="string">'name'</span>: <span class="string">'HA'</span>, <span class="string">'age'</span>: <span class="number">25</span> &#125;,</div><div class="line">  &#123; <span class="string">'id'</span>: <span class="number">3</span>, <span class="string">'name'</span>: <span class="string">'BJ'</span>, <span class="string">'age'</span>: <span class="number">32</span> &#125;,</div><div class="line">  &#123; <span class="string">'id'</span>: <span class="number">4</span>, <span class="string">'name'</span>: <span class="string">'PJ'</span>, <span class="string">'age'</span>: <span class="number">28</span> &#125;,</div><div class="line">  &#123; <span class="string">'id'</span>: <span class="number">5</span>, <span class="string">'name'</span>: <span class="string">'JE'</span>, <span class="string">'age'</span>: <span class="number">27</span> &#125;,</div><div class="line">  &#123; <span class="string">'id'</span>: <span class="number">6</span>, <span class="string">'name'</span>: <span class="string">'JM'</span>, <span class="string">'age'</span>: <span class="number">32</span> &#125;,</div><div class="line">  &#123; <span class="string">'id'</span>: <span class="number">7</span>, <span class="string">'name'</span>: <span class="string">'JI'</span>, <span class="string">'age'</span>: <span class="number">31</span> &#125;</div><div class="line">]</div><div class="line"></div><div class="line"><span class="comment">## 일반적인 사용</span></div><div class="line">_.go(users,</div><div class="line">  <span class="keyword">lambda</span> users: _.filter(users, <span class="keyword">lambda</span> u, *r: u[<span class="string">'age'</span>] &lt; <span class="number">30</span>),</div><div class="line">  <span class="keyword">lambda</span> users: _.pluck(users, <span class="string">'name'</span>),</div><div class="line">  <span class="keyword">print</span>)</div><div class="line"><span class="comment"># ["HA", "PJ", "JE"]</span></div><div class="line"></div><div class="line"><span class="comment">## 부분 커링이 된다면</span></div><div class="line">_.go(users,</div><div class="line">  _.filter(<span class="keyword">lambda</span> u, *r: u[<span class="string">'age'</span>] &lt; <span class="number">30</span>),</div><div class="line">  _.pluck(<span class="string">'name'</span>),</div><div class="line">  <span class="keyword">print</span>)</div><div class="line"><span class="comment"># ["HA", "PJ", "JE"]</span></div><div class="line"></div><div class="line"><span class="comment">## Underscore.py 체인</span></div><div class="line">underscore\</div><div class="line">  .chain(users)\</div><div class="line">  .filter(<span class="keyword">lambda</span> u: u[<span class="string">'age'</span>] &lt; <span class="number">30</span>)\</div><div class="line">  .pluck(<span class="string">'name'</span>)\</div><div class="line">  .tap(<span class="keyword">print</span>)</div><div class="line"><span class="comment"># ["HA", "PJ", "JE"]</span></div></pre></td></tr></table></figure>
<p><code>_.go</code>, <code>_.pipe</code> 등의 파이프라인이 받는 재료는 함수이기 때문에 아무 함수나 조합할 수 있습니다. 체인처럼 메서드 등으로 준비되어있지 않아도 되며 Partial.py의 함수만 사용할 필요도 없습니다. Partial.py의 파이프라인은 결과를 여러 개로 리턴할 수 있고, 여러 개의 인자를 받을 수 있고, 다른 라이브러리에 있는 함수든, 직접 만든 함수든, 익명 함수든 모두 쉽게 사용할 수 있습니다.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div></pre></td><td class="code"><pre><div class="line">products = [</div><div class="line">  &#123; <span class="string">'id'</span>: <span class="number">1</span>, <span class="string">'name'</span>: <span class="string">'후드 집업'</span>, <span class="string">'discounted_price'</span>: <span class="number">6000</span>, <span class="string">'price'</span>: <span class="number">10000</span>  &#125;,</div><div class="line">  &#123; <span class="string">'id'</span>: <span class="number">2</span>, <span class="string">'name'</span>: <span class="string">'코잼 후드티'</span>, <span class="string">'discounted_price'</span>: <span class="number">8000</span>, <span class="string">'price'</span>: <span class="number">8000</span>  &#125;,</div><div class="line">  &#123; <span class="string">'id'</span>: <span class="number">3</span>, <span class="string">'name'</span>: <span class="string">'A1 반팔티'</span>, <span class="string">'discounted_price'</span>: <span class="number">6000</span>, <span class="string">'price'</span>: <span class="number">6000</span>  &#125;,</div><div class="line">  &#123; <span class="string">'id'</span>: <span class="number">4</span>, <span class="string">'name'</span>: <span class="string">'코잼 반팔티'</span>, <span class="string">'discounted_price'</span>: <span class="number">5000</span>, <span class="string">'price'</span>: <span class="number">6000</span>  &#125;</div><div class="line">]</div><div class="line"></div><div class="line"><span class="comment"># 할인 상품들을 가격이 낮은 순으로 정렬한 상품 이름들</span></div><div class="line">_.go(products,</div><div class="line">  _.filter(<span class="keyword">lambda</span> p, *r: p[<span class="string">'price'</span>] &gt; p[<span class="string">'discounted_price'</span>]),</div><div class="line">  _.sortBy(<span class="string">'discounted_price'</span>),</div><div class="line">  _.pluck(<span class="string">'name'</span>),</div><div class="line">  <span class="keyword">print</span>)</div><div class="line">  <span class="comment"># ["코잼 반팔티", "후드 집업"]</span></div><div class="line"></div><div class="line"><span class="comment"># 할인이 없는 상품들의 id들</span></div><div class="line">_.go(products,</div><div class="line">  _.reject(<span class="keyword">lambda</span> p, *r: p[<span class="string">'price'</span>] &gt; p[<span class="string">'discounted_price'</span>]),</div><div class="line">  _.pluck(<span class="string">'id'</span>),</div><div class="line">  <span class="keyword">print</span>)</div><div class="line">  <span class="comment"># [2, 3]</span></div><div class="line"></div><div class="line"><span class="comment"># 할인 상품 중 할인액이 가장 낮은 상품의 이름</span></div><div class="line">_.go(products,</div><div class="line">  _.filter(<span class="keyword">lambda</span> p, *r: p[<span class="string">'price'</span>] &gt; p[<span class="string">'discounted_price'</span>]),</div><div class="line">  _.min(<span class="keyword">lambda</span> p, *r: p[<span class="string">'price'</span>] - p[<span class="string">'discounted_price'</span>]),</div><div class="line">  _.val(<span class="string">'name'</span>),</div><div class="line">  <span class="keyword">print</span>)</div><div class="line">  <span class="comment"># 코잼 반팔티</span></div><div class="line"></div><div class="line"><span class="comment"># 할인액이 가장 높은 상품의 이름</span></div><div class="line">_.go(products,</div><div class="line">  _.max(<span class="keyword">lambda</span> p, *r: p[<span class="string">'price'</span>] - p[<span class="string">'discounted_price'</span>]),</div><div class="line">  _.val(<span class="string">'name'</span>),</div><div class="line">  <span class="keyword">print</span>)</div><div class="line">  <span class="comment"># 후드 집업</span></div></pre></td></tr></table></figure>
<h2 id="비동기"><a href="#비동기" class="headerlink" title="비동기"></a>비동기</h2><p><code>async</code>, <code>await</code> 키워드와 Partial.py를 함께 사용하면 다양한 비동기 상황을 간단히 제어할 수 있습니다.</p>
<h3 id="파이프라인으로-비동기-제어-하기"><a href="#파이프라인으로-비동기-제어-하기" class="headerlink" title="파이프라인으로 비동기 제어 하기"></a>파이프라인으로 비동기 제어 하기</h3><p><code>_.asy</code>를 네임스페이스로 갖는 <code>_.asy.go</code>, <code>_.asy.pipe</code> 등의 파이프라인 함수들은 비동기 제어를 지원합니다.</p>
<h5 id="await-키워드와-함께-사용"><a href="#await-키워드와-함께-사용" class="headerlink" title="await 키워드와 함께 사용:"></a>await 키워드와 함께 사용:</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">def</span> <span class="title">asy_add</span><span class="params">(val, *r)</span>:</span></div><div class="line">  <span class="keyword">await</span> asyncio.sleep(<span class="number">1</span>)</div><div class="line">  <span class="keyword">return</span> val + <span class="number">10</span></div><div class="line">  </div><div class="line"><span class="comment">## await 키워드를 사용해서 바로 실행하는 _.go.asy</span></div><div class="line"><span class="keyword">await</span> _.asy.go(<span class="number">10</span>,</div><div class="line">  asy_add,</div><div class="line">  <span class="keyword">print</span>)</div><div class="line">  <span class="comment"># 20</span></div><div class="line">  </div><div class="line"><span class="comment">## _.asy.pipe로 비동기 함수와 동기 함수 조합해 만든 새로운 함수</span></div><div class="line">asy_pipe = _.asy.pipe(asy_add, <span class="keyword">print</span>)</div><div class="line"><span class="keyword">await</span> asy_pipe(<span class="number">10</span>) </div><div class="line"><span class="comment"># 20</span></div><div class="line"></div><div class="line"><span class="comment">## _.pipe는 비동기 함수를 만나면 자동으로 _.asy.pipe가 됩니다.</span></div><div class="line">asy_pipe = _.pipe(asy_add, <span class="keyword">print</span>)</div><div class="line"><span class="keyword">await</span> asy_pipe(<span class="number">10</span>)</div><div class="line"><span class="comment"># 20</span></div></pre></td></tr></table></figure>
<h3 id="컬렉션을-다루는-비동기-제어-함수"><a href="#컬렉션을-다루는-비동기-제어-함수" class="headerlink" title="컬렉션을 다루는 비동기 제어 함수"></a>컬렉션을 다루는 비동기 제어 함수</h3><p>Partial.py의 <code>_.each</code>, <code>_.map</code>, <code>_.reduce</code> 등의 주요 함수들은 <code>_.asy.go</code>와 <code>_.asy.pipe</code>처럼 동기와 비동기 상황이 모두 대응되도록 되어 있습니다. Partial.py의 함수를 이용하면 비동기 상황에서도 동기 상황과 동일한 코드를 작성할 수 있고, 비동기 함수와 동기 함수의 조합도 가능합니다.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">def</span> <span class="title">asyncDate</span><span class="params">(*r)</span>:</span></div><div class="line">  <span class="keyword">await</span> asyncio.sleep(<span class="number">1</span>)</div><div class="line">  <span class="keyword">return</span> datetime.datetime.now()</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">syncDate</span><span class="params">(*r)</span>:</span></div><div class="line">  <span class="keyword">return</span> datetime.datetime.now()</div><div class="line"></div><div class="line">_.go(</div><div class="line">  [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>],</div><div class="line">  _.map(syncDate),</div><div class="line">  _.map(<span class="keyword">lambda</span> now, *r: now.strftime(<span class="string">'%Y-%m-%d %H:%M:%S'</span>)),</div><div class="line">  <span class="keyword">print</span>)</div><div class="line"><span class="comment"># ['2017-06-16 12:34:39', '2017-06-16 12:34:39', '2017-06-16 12:34:39']</span></div><div class="line"></div><div class="line"><span class="keyword">await</span> _.asy.go(</div><div class="line">  [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>],</div><div class="line">  _.map(asyncDate),</div><div class="line">  _.map(<span class="keyword">lambda</span> now, *r: now.strftime(<span class="string">'%Y-%m-%d %H:%M:%S'</span>)),</div><div class="line">  <span class="keyword">print</span>)</div><div class="line"><span class="comment"># ['2017-06-16 12:34:39', '2017-06-16 12:34:39', '2017-06-16 12:34:39']</span></div></pre></td></tr></table></figure>
<p>위 사례처럼 Partial.py는 <code>_.pipe</code>, <code>_.each</code>, <code>_.map</code>, <code>_.find</code>, <code>_.filter</code>, <code>_.reject</code>, <code>_.reduce</code>, <code>_.some</code>, <code>_.every</code> 등의 함수들에서 자동 비동기 제어 로직을 지원합니다.</p>
<h2 id="지연-평가-L"><a href="#지연-평가-L" class="headerlink" title="지연 평가 L"></a>지연 평가 L</h2><p>Partial.py의 <code>L</code>을 이용하면, 파이프라인 내부에서 함수들의 실행 순서를 재배치하여 적절하게 평가를 지연합니다. 사용법은 간단합니다. Partial.py에서 <code>L</code>을 <code>import</code>하시면 됩니다. <code>L</code>을 통해 지연 평가할 영역을 명시적으로 선택할 수 있습니다. <code>_.go, _.pipe</code>등의 파이프라인이 <code>L</code>로 시작하여 <code>L</code>로 끝날 때까지의 함수들을 재배치하여 성능을 개선합니다.</p>
<h3 id="비교"><a href="#비교" class="headerlink" title="비교"></a>비교</h3><h5 id="엄격한-평가"><a href="#엄격한-평가" class="headerlink" title="엄격한 평가:"></a>엄격한 평가:</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">list = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>]</div><div class="line">_.go(list,</div><div class="line">  _.map(<span class="keyword">lambda</span> v, *r: v * v), <span class="comment"># 6번</span></div><div class="line">  _.filter(<span class="keyword">lambda</span> v, *r: v &lt; <span class="number">20</span>), <span class="comment"># 6번</span></div><div class="line">  _.take(<span class="number">2</span>),</div><div class="line">  <span class="keyword">print</span>)</div><div class="line"><span class="comment"># [1, 4]</span></div><div class="line"><span class="comment"># 총 12번</span></div></pre></td></tr></table></figure>
<h5 id="지연-평가"><a href="#지연-평가" class="headerlink" title="지연 평가:"></a>지연 평가:</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">list = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>]</div><div class="line">_.go(list,</div><div class="line">  L.map(<span class="keyword">lambda</span> v, *r: v * v), <span class="comment"># 2번</span></div><div class="line">  L.filter(<span class="keyword">lambda</span> v, *r: v &lt; <span class="number">20</span>), <span class="comment"># 2번</span></div><div class="line">  L.take(<span class="number">2</span>),</div><div class="line">  <span class="keyword">print</span>)</div><div class="line"><span class="comment"># [1, 4]</span></div><div class="line"><span class="comment"># 총 4번</span></div></pre></td></tr></table></figure>
<h3 id="지원-함수들"><a href="#지원-함수들" class="headerlink" title="지원 함수들"></a>지원 함수들</h3><p>Partial.js의 지연 평가 지원 함수로는 <code>L.map</code>, <code>L.filter</code>, <code>L.reject</code>, <code>L.find</code>, <code>L.some</code>, <code>L.every</code>, <code>L.take</code>가 있습니다. 이 함수들을 순서대로 나열하면 파이프라인이 평가 시점을 변경하여 성능을 개선합니다.</p>
<p>다음과 같은 상황 등에서 동작합니다.</p>
<ul>
<li>map-&gt;map-&gt;map</li>
<li>map-&gt;take</li>
<li>filter-&gt;take</li>
<li>map-&gt;filter-&gt;take</li>
<li>map-&gt;filter-&gt;map-&gt;map</li>
<li>map-&gt;filter-&gt;map-&gt;take</li>
<li>map-&gt;reject-&gt;map-&gt;map-&gt;filter-&gt;map</li>
<li>map-&gt;some</li>
<li>map-&gt;every</li>
<li>map-&gt;find</li>
<li>map-&gt;filter-&gt;some</li>
<li>map-&gt;filter-&gt;every</li>
<li>map-&gt;filter-&gt;find</li>
<li>filter-&gt;map-&gt;some</li>
<li>filter-&gt;map-&gt;every</li>
<li>filter-&gt;map-&gt;reject-&gt;find</li>
</ul>
<p>지연 평가를 시작시키고 유지 시키는 함수는 <code>map</code>, <code>filter</code>, <code>reject</code>이고 끝을 내는 함수는 <code>take</code>, <code>some</code>, <code>every</code>, <code>find</code>, 입니다.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div></pre></td><td class="code"><pre><div class="line">users = [</div><div class="line">  &#123; <span class="string">'id'</span>: <span class="number">1</span>, <span class="string">'name'</span>: <span class="string">'ID'</span>, <span class="string">'age'</span>: <span class="number">12</span> &#125;,</div><div class="line">  &#123; <span class="string">'id'</span>: <span class="number">2</span>, <span class="string">'name'</span>: <span class="string">'BJ'</span>, <span class="string">'age'</span>: <span class="number">28</span> &#125;,</div><div class="line">  &#123; <span class="string">'id'</span>: <span class="number">3</span>, <span class="string">'name'</span>: <span class="string">'HA'</span>, <span class="string">'age'</span>: <span class="number">13</span> &#125;,</div><div class="line">  &#123; <span class="string">'id'</span>: <span class="number">4</span>, <span class="string">'name'</span>: <span class="string">'PJ'</span>, <span class="string">'age'</span>: <span class="number">23</span> &#125;,</div><div class="line">  &#123; <span class="string">'id'</span>: <span class="number">5</span>, <span class="string">'name'</span>: <span class="string">'JE'</span>, <span class="string">'age'</span>: <span class="number">29</span> &#125;,</div><div class="line">  &#123; <span class="string">'id'</span>: <span class="number">6</span>, <span class="string">'name'</span>: <span class="string">'JM'</span>, <span class="string">'age'</span>: <span class="number">32</span> &#125;,</div><div class="line">  &#123; <span class="string">'id'</span>: <span class="number">7</span>, <span class="string">'name'</span>: <span class="string">'JE'</span>, <span class="string">'age'</span>: <span class="number">31</span> &#125;,</div><div class="line">  &#123; <span class="string">'id'</span>: <span class="number">8</span>, <span class="string">'name'</span>: <span class="string">'HI'</span>, <span class="string">'age'</span>: <span class="number">15</span> &#125;,</div><div class="line">  &#123; <span class="string">'id'</span>: <span class="number">9</span>, <span class="string">'name'</span>: <span class="string">'HO'</span>, <span class="string">'age'</span>: <span class="number">28</span> &#125;,</div><div class="line">  &#123; <span class="string">'id'</span>: <span class="number">10</span>, <span class="string">'name'</span>: <span class="string">'KO'</span>, <span class="string">'age'</span>: <span class="number">34</span> &#125;</div><div class="line">]</div><div class="line"></div><div class="line"><span class="comment"># 10대 2명까지만 찾아내기</span></div><div class="line">_.go(users,</div><div class="line">  L.filter(<span class="keyword">lambda</span> user, *r : user[<span class="string">'age'</span>] &lt; <span class="number">20</span>),</div><div class="line">  L.take(<span class="number">2</span>),</div><div class="line">  <span class="keyword">print</span>)</div><div class="line"><span class="comment"># [&#123; 'id': 1, 'name': "ID", 'age': 12 &#125;, &#123; 'id': 3, 'name': "HA", 'age': 13 &#125;]</span></div><div class="line"><span class="comment"># 3번만 반복</span></div><div class="line"></div><div class="line"><span class="comment"># 10대 2명까지만 찾아내서 이름 수집하기</span></div><div class="line">_.go(users,</div><div class="line">  L.filter(<span class="keyword">lambda</span> user, *r : user[<span class="string">'age'</span>] &lt; <span class="number">20</span>),</div><div class="line">  L.map(<span class="keyword">lambda</span> v, *r : v[<span class="string">'name'</span>]),</div><div class="line">  L.take(<span class="number">2</span>),</div><div class="line">  <span class="keyword">print</span>)</div><div class="line"><span class="comment"># ["ID", "HA"]</span></div><div class="line"><span class="comment"># 3번만 반복</span></div></pre></td></tr></table></figure>
<h3 id="L-strict"><a href="#L-strict" class="headerlink" title="L.strict"></a>L.strict</h3><p><code>L.strict</code>를 이용하여 지연 평가를 동작시킬 것인가를 동적으로 변경할 수 있습니다.</p>
<h5 id="숫자로-하기"><a href="#숫자로-하기" class="headerlink" title="숫자로 하기:"></a>숫자로 하기:</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">strict_or_lazy1 = __(</div><div class="line">  _.range,</div><div class="line">  L.strict(<span class="number">100</span>),</div><div class="line">  L.map(<span class="keyword">lambda</span> v, *r: v * v),</div><div class="line">  L.filter(<span class="keyword">lambda</span> v, *r: _.bool(v % <span class="number">2</span>)),</div><div class="line">  L.take(<span class="number">10</span>),</div><div class="line">  <span class="keyword">print</span>)</div><div class="line"></div><div class="line">strict_or_lazy1(<span class="number">50</span>)</div><div class="line"><span class="comment"># [1, 9, 25, 49, 81, 121, 169, 225, 289, 361]</span></div><div class="line"><span class="comment"># 50 번 반복 (염격)</span></div><div class="line"></div><div class="line">strict_or_lazy1(<span class="number">100</span>)</div><div class="line"><span class="comment"># [1, 9, 25, 49, 81, 121, 169, 225, 289, 361]</span></div><div class="line"><span class="comment"># 20 번 반복 (지연)</span></div><div class="line"></div><div class="line">strict_or_lazy1(<span class="number">15</span>)</div><div class="line"><span class="comment"># [1, 9, 25, 49, 81, 121, 169]</span></div><div class="line"><span class="comment"># 15 번 반복 (엄격)</span></div></pre></td></tr></table></figure>
<h5 id="함수로-하기"><a href="#함수로-하기" class="headerlink" title="함수로 하기:"></a>함수로 하기:</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">strict_or_lazy2 = __(</div><div class="line">  _.range,</div><div class="line">  L.strict(<span class="keyword">lambda</span> list, *r : len(list) &lt; <span class="number">100</span>),</div><div class="line">  L.map(<span class="keyword">lambda</span> v, *r : v * v),</div><div class="line">  L.filter(<span class="keyword">lambda</span> v, *r : bool(v % <span class="number">2</span>)),</div><div class="line">  L.take(<span class="number">10</span>),</div><div class="line">  <span class="keyword">print</span>)</div><div class="line"></div><div class="line">strict_or_lazy2(<span class="number">50</span>)</div><div class="line"><span class="comment"># [1, 9, 25, 49, 81, 121, 169, 225, 289, 361]</span></div><div class="line"><span class="comment"># 50 번 반복 (염격)</span></div><div class="line"></div><div class="line">strict_or_lazy2(<span class="number">100</span>)</div><div class="line"><span class="comment"># [1, 9, 25, 49, 81, 121, 169, 225, 289, 361]</span></div><div class="line"><span class="comment"># 20 번 반복 (지연)</span></div><div class="line"></div><div class="line">strict_or_lazy2(<span class="number">15</span>)</div><div class="line"><span class="comment"># [1, 9, 25, 49, 81, 121, 169]</span></div><div class="line"><span class="comment"># 15 번 반복 (엄격)</span></div></pre></td></tr></table></figure>

    </div>
  </div>
</article>



    </div>
  


  </div>
</div>

      </div>
    </div>
    <nav id="mobile-nav">
  
    <a href="/partial.py/" class="mobile-nav-link">About</a>
  
    <a href="/partial.py/docs" class="mobile-nav-link">Docs</a>
  
    <a href="https://github.com/marpple/partial.py" class="mobile-nav-link">Github</a>
  
    <a href="https://marpple.github.io/partial.js/" class="mobile-nav-link">Partial.js</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>


  <link rel="stylesheet" href="/partial.py/fancybox/jquery.fancybox.css">
  <script src="/partial.py/fancybox/jquery.fancybox.pack.js"></script>

<script src="/partial.py/js/partial.js"></script>
<script src="/partial.py/js/script.js"></script>

  </div>
</body>
</html>